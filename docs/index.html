<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Confetch</title>
    
    <meta name="description" content="Configur-able/ed fetch requests" />
    
        <meta name="keywords" content="configurable fetch requests, configured fetch requests, javascript, akshay-nm, confetch" />
        <meta name="keyword" content="configurable fetch requests, configured fetch requests, javascript, akshay-nm, confetch" />
    
    
    
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="https://fonts.googleapis.com/css?family=Libre+Franklin:400,700" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/main.css">

    
    <script>
    var config = {"monospaceLinks":false,"cleverLinks":false,"meta":{"title":"Confetch","description":"Configur-able/ed fetch requests","keyword":"configurable fetch requests, configured fetch requests, javascript, akshay-nm, confetch"},"default":{}};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html"></a></h3>
    <button id="menuToggle" class="btn btn-link btn-lg menu-toggle">
        <span class="glyphicon glyphicon-menu-hamburger"></span>
    </button>
    <div class="search">
        <input id="search" type="text" class="form-control input-md" placeholder="Search...">
    </div>
    <ul class="list">
    
    
        <li class="item" data-name="module:Confetch">
            <span class="title namespace ">
                
                <span class="namespaceTag">
                    <span class="glyphicon glyphicon-folder-open"></span>
                </span>
                
                
                    <a href="module-Confetch.html">Confetch</a>
                
            </span>
            
            <ul class="members itemMembers">
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="module:Confetch~confetch"><a href="module-Confetch.html#~confetch">confetch</a></li>
            
                <li class="parent  status-deprecated" data-name="module:Confetch~configure"><a href="module-Confetch.html#~configure">configure</a></li>
            
                <li class="parent  " data-name="module:Confetch~configureConfetch"><a href="module-Confetch.html#~configureConfetch">configureConfetch</a></li>
            
                <li class="parent  " data-name="module:Confetch~getConfetchConfiguration"><a href="module-Confetch.html#~getConfetchConfiguration">getConfetchConfiguration</a></li>
            
                <li class="parent  status-deprecated" data-name="module:Confetch~getCurrentGlobalConfiguration"><a href="module-Confetch.html#~getCurrentGlobalConfiguration">getCurrentGlobalConfiguration</a></li>
            
            </ul>
            
            <ul class="events itemMembers">
            
            </ul>
            
        </li>
    
        <li class="item" data-name="module:handlers">
            <span class="title namespace ">
                
                <span class="namespaceTag">
                    <span class="glyphicon glyphicon-folder-open"></span>
                </span>
                
                
                    <a href="module-handlers.html">handlers</a>
                
            </span>
            
            <ul class="members itemMembers">
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="module:handlers~buildResponseHandler"><a href="module-handlers.html#~buildResponseHandler">buildResponseHandler</a></li>
            
                <li class="parent  " data-name="module:handlers~configureStatusCodeBasedErrors"><a href="module-handlers.html#~configureStatusCodeBasedErrors">configureStatusCodeBasedErrors</a></li>
            
            </ul>
            
            <ul class="events itemMembers">
            
            </ul>
            
        </li>
    
        <li class="item" data-name="module:utils">
            <span class="title namespace ">
                
                <span class="namespaceTag">
                    <span class="glyphicon glyphicon-folder-open"></span>
                </span>
                
                
                    <a href="module-utils.html">utils</a>
                
            </span>
            
            <ul class="members itemMembers">
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="typedefs itemMembers">
            
            </ul>
            
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="module:utils.customFetch"><a href="module-utils.html#.customFetch">customFetch</a></li>
            
                <li class="parent  " data-name="module:utils.customFetch"><a href="module-utils.html#.customFetch">customFetch</a></li>
            
                <li class="parent  " data-name="module:utils.getUrlFromPath"><a href="module-utils.html#.getUrlFromPath">getUrlFromPath</a></li>
            
            </ul>
            
            <ul class="events itemMembers">
            
            </ul>
            
        </li>
    
    </ul>
</div>

    <div class="main">
        <h1 class="page-title" data-filename="index.html">Index</h1>
        


    


    <h3> </h3>








    




    <section>
        <article class="readme content-size"><h1>Confetch</h1>
<p><strong>Configur-ed/able fetch</strong></p>
<p><a target="_blank" href="https://github.com/prettier/prettier"><img src="https://img.shields.io/badge/code_style-prettier-ff69b4.svg?style=flat-square" alt="code style: prettier"></a>
<a target="_blank" href="https://codecov.io/gh/akshay-nm/confetch"><img src="https://codecov.io/gh/akshay-nm/confetch/branch/main/graph/badge.svg?token=4WB73CELH0" alt="codecov"></a></p>
<h2>tldr;</h2>
<p>To get started:</p>
<p><code>npm install @akshay-nm/confetch</code></p>
<p>or</p>
<p><code>yarn add @akshay-nm/confetch</code></p>
<p>This is a wrapper over <code>window.fetch</code>. Go through <a target="_blank" href="https://github.com/akshay-nm/confetch-example">https://github.com/akshay-nm/confetch-example</a> and <a target="_blank" href="https://akshay-nm.github.io/confetch">Confetch manual</a> for more details.</p>
<p>This package also has a default <code>responseHandler</code> which you can use. The <code>responseHandler</code> just resolves the <code>res.json()</code> promise if possible, otherwise throws the errors based on statusCodes. You can pass the errors as an object.</p>
<h3>For the bravehearts</h3>
<p><em>VOLATILE PACKAGE (RAPIDLY CHANGING API so please bear with me till we reach v1.0.0)</em>
<em>v0.x.0 to v0.y.0 means some features/methods have been deprecated</em>
<em>v0.x.y to v0.x.z means a new feature/method has been added without changing existing ones</em></p>
<pre class="prettyprint source lang-jsx"><code>const { configureConfetch } = require('@akshay-nm/confetch')
const { configureStatusCodeBasedErrors } = require('@akshay-nm/confetch').handlers

// The new object is merged (it does not replace the default status codes configuration).
configureStatusCodeBasedErrors({
  400: 'CUSTOM ERROR MESSAGE TO BE THROWN IF THE RESPONSE CODE IS 400',
}) // This will make sure that all requestHandlers throw error with the custom message whenever the resposne status code is 400

configureConfetch({
  baseUrl: 'YOUR_BASE_URL', // this is the only parameter you NEED to pass (otherwise confetch will throw)
})

...

const { buildResponseHandler } = require('@akshay-nm/confetch').handlers
const { getUrlFromPath } = require('@akshay-nm/confetch').utils

const responseHandler1 = buildResponseHandler() // This will throw errors preconfigured message
const responseHandler2 = buildResponseHandler({ 400: 'OTHER CUSTOM MESSAGE' }) // This will throw error with 'OTHER CUSTOM MESSAGE' on 400

confetch({
  url: getUrlFromPath('YOUR_PATH?YOUR_QUERY'),
  ... // rest of parameters for fetch
}).send().then(responseHander1).catch(console.log) // this will log the global message in case of a 400 (configured using configureStatusCodeBasedErrors)

confetch({
  url: getUrlFromPath('YOUR_PATH?YOUR_QUERY'),
  ... // rest of parameters for fetch
}).send().then(responseHander1).catch(console.log) // this will log 'OTHER CUSTOM MESSAGE' in case of 400 (configured via buildResponseHandler)

</code></pre>
<p>Since the response handler just tries to convert the response into JSON, it either returns a promise or just throws the errors.</p>
<p>Following configuration options are supported:</p>
<ul>
<li><code>baseUrl</code>: You can specify a base url and use the <code>getUrlFromPath</code> method to get complete urls for your requests.</li>
<li><code>timeoutDuration</code>: This is the duration after which your requests will be aborted.</li>
<li><code>headers</code>: This is an object (just like what you would pass to a simple <code>fetch</code> call).</li>
</ul>
<p>All the configuration parameters are merged with info object passed to a <code>confetch</code> call. So you can override the default paramaters while creating configured fetch requests, if that's what you want.</p>
<p>The package also exposes <code>confetch</code> method which basically returns an object with 3 properties:</p>
<ul>
<li><code>request</code></li>
<li><code>send</code></li>
<li><code>abort</code></li>
<li><code>controller</code></li>
<li><code>signal</code></li>
<li><code>timeout</code></li>
</ul>
<p>The ones which you should be interested in are:</p>
<ul>
<li><code>send</code></li>
<li><code>abort</code></li>
</ul>
<p>You call <code>send</code> to send the configured requests and <code>abort</code> to manually abort the request.
Both of them return a promise.</p>
<p>So this is how it would look like:</p>
<pre class="prettyprint source lang-jsx"><code>const { configureConfetch } = require('@akshay-nm/confetch')
confetchConfiguration = {
  baseUrl: 'https://some.org',
  timeoutDuration = 3000,
  headers = {
    'Content-Type': 'application/json'
  }
}
configureConfetch(confetchConfiguration)

...
const { confetch } = require('@akshay-nm/confetch')
const info = {
  url: getUrlFromPath(`/some-path?some=query`),
  method: 'GET',
  headers: {
    'Some-Request-Specific-Header': 'ITS_VALUE'
  }
}

// initialise, send, abort
const request = confetch(info)
request.send()
  .then(res => {
    /*do something with res/*
  })
  .catch(error => {
    /*handle error*/
  })
request.abort()

// fire and forget
confetch(info).send()
  .then(res => {
    /*do something with res/*
  })
  .catch(error => {
    /*handle error*/
  })
</code></pre>
<h3>What's next?</h3>
<ul>
<li>Some pre-configured fetches</li>
</ul></article>
    </section>






        

        <footer class="content-size">
            <div class="footer">
                Documentation generated by <a target="_blank" href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> on Tue Apr 06 2021 03:19:24 GMT+0530 (India Standard Time)
            </div>
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/main.js"></script>


</body>
</html>