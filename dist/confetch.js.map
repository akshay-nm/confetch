{"version":3,"file":"confetch.js","sources":["../src/index.js"],"sourcesContent":["/**\r\n * @module Confetch\r\n */\r\n\r\nconst { customFetch } = require('./utils')\r\nconst _ = require('lodash')\r\n\r\nconst handlers = require('./handlers')\r\nconst utils = require('./utils')\r\n\r\nconst config = {\r\n  debug: false,\r\n  requestParams: {\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    timeoutDuration: 3000,\r\n  },\r\n}\r\n\r\n/**\r\n * Returns current configuration of confetch requests\r\n * @returns {object} current configuration of confetch requests\r\n */\r\nconst getConfetchConfiguration = () => ({ ...config })\r\n\r\n/**\r\n * Returns current configuration of confetch requests\r\n * @deprecated\r\n * @returns {object} current configuration of confetch requests\r\n */\r\nconst getCurrentGlobalConfiguration = () => ({ ...config })\r\n\r\n/**\r\n * Configure parameters for all confetch requests\r\n *\r\n * @param {string} baseUrl If you want to send requests on https://www.your.domain/abc, your baseUrl is https://www.your.domain.\r\n * @param {object} headers Same as headers option passed in fetch: for more information, check: <a href='https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#supplying_request_options' rel='nofollow noreferrer' target='_blank'>Supplying request options to fetch</a>.\r\n * @param {number} timeoutDuration Timeout duration in millis, for 3 secs, it'll be 3000.\r\n * @param {boolean} debug default: false, set it to true if you want some logs.\r\n */\r\nconst configureConfetch = ({ baseUrl, headers, timeoutDuration, debug }) => {\r\n  config.debug = !!debug || config.debug\r\n  config.baseUrl = baseUrl || config.baseUrl\r\n\r\n  config.requestParams.timeoutDuration = timeoutDuration || config.requestParams.timeoutDuration\r\n  config.requestParams.headers = headers || config.requestParams.headers\r\n}\r\n\r\n/**\r\n * Create a confetch instance which can be sent or aborted\r\n *\r\n * @param {object} info\r\n * @returns {object}\r\n */\r\nconst confetch = (info) => {\r\n  const requestConfiguration = _.merge({}, config.requestParams, info)\r\n  return customFetch(requestConfiguration)\r\n}\r\n\r\n/**\r\n * Configure parameters for all confetch requests\r\n * @deprecated\r\n * @param {string} baseUrl If you want to send requests on https://www.your.domain/abc, your baseUrl is https://www.your.domain.\r\n * @param {object} headers Same as headers option passed in fetch: for more information, check: <a href='https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#supplying_request_options' rel='nofollow noreferrer' target='_blank'>Supplying request options to fetch</a>.\r\n * @param {number} timeoutDuration Timeout duration in millis, for 3 secs, it'll be 3000.\r\n * @param {boolean} debug default: false, set it to true if you want some logs.\r\n */\r\nconst configure = ({ baseUrl, headers, timeoutDuration, debug }) => {\r\n  config.debug = !!debug || config.debug\r\n  config.baseUrl = baseUrl || config.baseUrl\r\n\r\n  config.requestParams.timeoutDuration = timeoutDuration || config.requestParams.timeoutDuration\r\n  config.requestParams.headers = headers || config.requestParams.headers\r\n}\r\n\r\nmodule.exports = {\r\n  confetch,\r\n  configureConfetch,\r\n  configure,\r\n  getConfetchConfiguration,\r\n  getCurrentGlobalConfiguration,\r\n  utils,\r\n  handlers,\r\n}\r\n"],"names":["customFetch","require","_","handlers","utils","config","debug","requestParams","headers","timeoutDuration","getConfetchConfiguration","getCurrentGlobalConfiguration","configureConfetch","baseUrl","confetch","info","requestConfiguration","merge","configure","module","exports"],"mappings":"aAIA,KAAM,CAAEA,aAAgBC,QAAQ,WAC1BC,EAAID,QAAQ,UAEZE,SAAWF,QAAQ,cACnBG,MAAQH,QAAQ,WAEhBI,OAAS,CACbC,OAAO,EACPC,cAAe,CACbC,QAAS,gBACS,oBAElBC,gBAAiB,MAQfC,yBAA2B,SAAYL,SAOvCM,8BAAgC,SAAYN,SAU5CO,kBAAoB,CAAA,CAAGC,QAAAA,EAASL,QAAAA,EAASC,gBAAAA,EAAiBH,MAAAA,MAC9DD,OAAOC,QAAUA,GAASD,OAAOC,MACjCD,OAAOQ,QAAUA,GAAWR,OAAOQ,QAEnCR,OAAOE,cAAcE,gBAAkBA,GAAmBJ,OAAOE,cAAcE,gBAC/EJ,OAAOE,cAAcC,QAAUA,GAAWH,OAAOE,cAAcC,SAS3DM,SAAYC,IACVC,EAAuBd,EAAEe,MAAM,GAAIZ,OAAOE,cAAeQ,UACxDf,YAAYgB,IAWfE,UAAY,CAAA,CAAGL,QAAAA,EAASL,QAAAA,EAASC,gBAAAA,EAAiBH,MAAAA,MACtDD,OAAOC,QAAUA,GAASD,OAAOC,MACjCD,OAAOQ,QAAUA,GAAWR,OAAOQ,QAEnCR,OAAOE,cAAcE,gBAAkBA,GAAmBJ,OAAOE,cAAcE,gBAC/EJ,OAAOE,cAAcC,QAAUA,GAAWH,OAAOE,cAAcC,SAGjEW,OAAOC,QAAU,CACfN,SAAAA,SACAF,kBAAAA,kBACAM,UAAAA,UACAR,yBAAAA,yBACAC,8BAAAA,8BACAP,MAAAA,MACAD,SAAAA"}